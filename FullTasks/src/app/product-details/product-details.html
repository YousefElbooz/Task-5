<div class="product-details">
  @if (product) {
    <h1 class="product-title fade-in">{{ product.title }}</h1>

    <div class="product-content fade-in">
      <img [src]="product.thumbnail" [alt]="product.title" class="product-image" />

      <div class="product-info">
        <p class="product-description">{{ product.description }}</p>

        <p class="product-price">
          {{ product.price | currency: 'EGP' : 'symbol' : '1.2-2' }}
          @if (product.discountPercentage > 0) {
            <span class="discount">(-{{ product.discountPercentage }}%)</span>
          }
        </p>

        <p class="product-stock" [style.color]="product.stock === 0 ? 'red' : '#00ff7f'">
          {{ product.stock === 0 ? 'Out of Stock' : 'In Stock' }}
        </p>

        <p><strong>Brand:</strong> {{ product.brand }}</p>
        <p><strong>Category:</strong> {{ product.category }}</p>
        <p><strong>Weight:</strong> {{ product.weight }}g</p>

        <p><strong>Dimensions:</strong>
          {{ product.dimensions.width }} × {{ product.dimensions.height }} × {{ product.dimensions.depth }} cm
        </p>

        <p><strong>SKU:</strong> {{ product.sku }}</p>
        <p><strong>Warranty:</strong> {{ product.warrantyInformation }}</p>
        <p><strong>Shipping:</strong> {{ product.shippingInformation }}</p>
        <p><strong>Return Policy:</strong> {{ product.returnPolicy }}</p>
        <p><strong>Minimum Order Quantity:</strong> {{ product.minimumOrderQuantity }}</p>

        <p><strong>Tags:</strong>
          @for (tag of product.tags; track tag) {
            <span class="tag">{{ tag }}</span>
          }
        </p>

        <div class="rating">
          @for (star of getstarArray(); track $index) {
            ⭐
          }
          <span class="rating-value">({{ product.rating }}/5)</span>
        </div>

        <img [src]="product.meta.qrCode" class="qr-code" alt="QR Code" />
        <p><strong>Barcode:</strong> {{ product.meta.barcode }}</p>
        <p><strong>Created:</strong> {{ product.meta.createdAt | date }}</p>
        <p><strong>Updated:</strong> {{ product.meta.updatedAt | date }}</p>

        <button class="add-to-cart" [disabled]="product.stock === 0">Add to Cart</button>
      </div>
    </div>

    <div class="reviews fade-in">
      <h2>Reviews</h2>
      @for (review of product.reviews; track $index) {
        <div class="review">
          <p class="reviewer"><strong>{{ review.reviewerName }}</strong> — {{ review.date | date }}</p>
          <p class="review-rating">Rating: {{ review.rating }}/5</p>
          <p class="review-comment">{{ review.comment }}</p>
        </div>
      }
    </div>
  }
</div>
